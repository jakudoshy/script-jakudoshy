#!/bin/bash

# üé® Colores estilo hacker
GREEN='\033[1;92m'
DARKGREEN='\033[0;32m'
BLACK='\033[0;30m'
CYAN='\033[1;96m'
RED='\033[1;91m'
WHITE='\033[1;97m'
NC='\033[0m'

# üåê DNS cubanos
DNS_SERVERS=("200.55.128.130" "200.55.128.140" "200.55.128.230" "200.55.128.250")
DOMINIO="dns.madara"

# üé≠ M√°scara Anonymous
mask_anon() {
echo -e "${CYAN}                üë§ JAKUDOSHY${NC}"
echo -e "${GREEN}"
echo "                              "
echo "                              "
echo "                              "
echo "       ‚£Ä‚£Ä‚£§‚£§‚£¥‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£∂‚£¶‚£§‚£§‚£Ñ‚£Ä‚°Ä"
echo "     ‚£¥‚£ø‚£ø‚°ø‚£ø‚¢ø‚£ü‚£ø‚£ª‚£ü‚°ø‚£ü‚£ø‚£ü‚°ø‚£ü‚£ø‚£ª‚£ü‚£ø‚£ª‚¢ø‚£ª‚°ø‚£ø‚¢ø"
echo "    ‚¢ò‚£ø‚¢Ø‚£∑‚°ø‚°ø‚°ø‚¢ø‚¢ø‚£∑‚£Ø‚°ø‚£Ω‚£û‚£∑‚£ª‚¢Ø‚£∑‚£ª‚£æ‚°ø‚°ø‚¢ø‚¢ø‚¢ø‚¢Ø‚£ü"
echo "    ‚¢∏‚¢û‚†ü‚†É‚£â‚¢â‚†â‚†â‚†ì‚†´‚¢ø‚£ø‚£∑‚¢∑‚£ª‚£û‚£ø‚£æ‚°ü‚†Ω‚†ö‚†ä‚†â‚†â‚†â‚†ô‚†ª"
echo "    ‚¢ú‚¢Ø‚£∫‚¢ø‚£ª‚£ø‚£ø‚£∑‚£î‚°Ñ‚†Ñ‚†à‚†õ‚£ø‚£ø‚°æ‚†ã‚†Å‚†Ñ‚†Ñ‚£Ñ‚£∂‚£æ‚£ø‚°ø‚£ø‚°≥"
echo "    ‚¢Ω‚¢±‚¢≥‚¢π‚°™‚°û‚†Æ‚†Ø‚¢Ø‚°ª‚°¨‚°ê‚¢®‚¢ø‚£ø‚£ø‚¢Ä‚†ê‚°•‚£ª‚°ª‚†Ø‚°≥‚¢≥‚¢π‚¢ú‚¢ú"
echo "   ‚††‚£ª‚¢å‚†ò‚†å‚°Ç‚†à‚†Å‚†â‚†Å‚†ò‚†ë‚¢ß‚£ï‚£ø‚£ø‚£ø‚¢§‚°™‚†ö‚†Ç‚†à‚†Å‚†Å‚†Å‚†Ç‚°ë‚†°"
echo "   ‚††‚£≥‚£ø‚£ø‚£Ω‚£≠‚£∂‚£∂‚£∂‚£∂‚£∂‚£∫‚£ü‚£æ‚£ª‚£ø‚£Ø‚¢Ø‚¢ø‚£≥‚£∂‚£∂‚£∂‚£ñ‚£∂‚£Æ‚£≠‚£∑"
echo "   ‚¢Ä‚¢ª‚°ø‚°ø‚£ü‚£ø‚£ª‚£Ω‚£ü‚£ø‚¢Ø‚£ü‚£û‚°∑‚£ø‚£ø‚£Ø‚¢ø‚¢Ω‚¢Ø‚£ø‚£ª‚£ü‚£ø‚£ª‚£ü‚£ø‚£ª"
echo "    ‚°ë‚°è‚†Ø‚°Ø‚°≥‚°Ø‚£ó‚¢Ø‚¢ü‚°Ω‚£ó‚£Ø‚£ü‚£ø‚£ø‚£æ‚£´‚¢ø‚£Ω‚†æ‚°Ω‚£∫‚¢≥‚°´‚°û‚°ó‚°ù"
echo "    ‚¢Ç‚°é‚†Ö‚°É‚¢á‚†á‚†á‚£É‚£ß‚°∫‚°ª‚°≥‚°´‚£ø‚°ø‚£ü‚†û‚†Ω‚†Ø‚¢ß‚£Ö‚£É‚†£‚†±‚°ë‚°ë‚†®"
echo "    ‚†ê‚†º‚£¶‚¢Ä‚†Ñ‚£∂‚£ø‚¢ø‚£ø‚£ß‚£Ñ‚°å‚†Ç‚†¢‚†©‚†Ç‚†ë‚£Å‚£Ö‚£æ‚¢ø‚£ü‚£∑‚†¶‚†Ñ‚†Ñ‚°§"
echo "     ‚†®‚¢ª‚£ß‚°Ö‚°à‚†õ‚†ø‚†ø‚†ø‚†õ‚†Å‚†Ñ‚¢Ä‚°Ä‚†Ñ‚†Ñ‚†ò‚†ª‚†ø‚†ø‚†Ø‚†ì‚†Å‚¢†‚£±‚°ø"
echo "     ‚†à‚¢å‚¢ø‚£∑‚°ê‚†§‚£Ä‚£Ä‚£Ç‚£Ä‚¢Ä‚¢Ä‚°ì‚†ù‚°Ç‚°Ä‚¢Ä‚¢Ä‚¢Ä‚£Ä‚£Ä‚†§‚¢ä‚£º‚°ü"
echo "      ‚†à‚¢¢‚†ö‚£ø‚£Ñ‚†à‚†â‚†õ‚†õ‚†ü‚†ø‚†ø‚†ü‚†ø‚†ª‚†ª‚†õ‚†õ‚†â‚†Ñ‚£†‚†æ‚¢ë‚†∞‚†à"
echo "        ‚†ë‚¢å‚†ø‚£¶‚°°‚£±‚£∏‚£∏‚£Ü‚†Ñ‚†Ñ‚†Ñ‚£∞‚£ï‚¢î‚¢î‚†°‚£º‚†û‚°°‚†Å‚†Å"
echo "          ‚†ë‚¢ù‚¢∑‚£ï‚°∑‚£ø‚°ø‚†Ñ‚†Ñ‚††‚£ø‚£Ø‚£Ø‚°≥‚°Ω‚°ã‚†å‚†Ñ‚†Ñ‚†Ñ"
echo "            ‚†ô‚¢Æ‚£ø‚£Ω‚£Ø‚†Ñ‚†Ñ‚¢®‚£ø‚£ø‚°∑‚°´‚†É‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ"
echo "              ‚†ò‚†ô‚†ù‚†Ç‚†Ñ‚¢ò‚†ã‚†É‚†Å‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ"
echo -e "${NC}"
}

# ================================
# üü© EFECTO MATRIX HACKER
# ================================
matrix_effect() {
    clear
    echo -e "${DARKGREEN}"
    for i in {1..20}; do
        line=""
        for j in {1..60}; do
            chars=("0" "1" "|" "/" "\\" "-" "+" "*" "#")
            rand=${chars[$RANDOM % ${#chars[@]}]}
            line+="$rand"
        done
        echo "$line"
        sleep 0.03
    done
    echo -e "${NC}"
    mask_anon
}

# ================================
# üü© MEN√ö DE ERROR HACKER (MODIFICADO)
# ================================
menu_error_dns() {
    clear
    echo -e "${RED}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo -e "${RED}   ‚ö† LO SENTIMOS ‚ö†${NC}"
    echo -e "${RED}   NO SE PUDO CONECTAR A NING√öN DNS${NC}"
    echo -e "${RED}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo ""
    echo -e "${GREEN}1) üîÑ Reintentar conexi√≥n${NC}"
    echo -e "${RED}2) üö™ Salir${NC}"
    echo ""
    mask_anon
    read -p "üëâ Selecciona una opci√≥n: " opcion_error

    case $opcion_error in
        1) conectar_dns ;;
        2) exit 0 ;;
        *) echo -e "${RED}‚ö† Opci√≥n inv√°lida${NC}"; sleep 1; menu_error_dns ;;
    esac
}

# ================================
# üü© EFECTO DE CARGA HACKER
# ================================
barra_hacker() {
    clear
    echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo -e "${GREEN}     üîì INICIALIZANDO SISTEMA JAKUDOSHY${NC}"
    echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo ""

    for i in $(seq 0 5 100); do
        bar=$(printf "%0.s‚ñà" $(seq 1 $((i/5))))
        printf "${DARKGREEN}[%-20s] ${GREEN}%3d%%${NC}\r" "$bar" "$i"
        sleep 0.02
    done
    echo ""
    mask_anon
    sleep 0.3
}

# ================================
# üü© FUNCI√ìN PRINCIPAL DE CONEXI√ìN
# ================================
conectar_dns() {

    DNS_OK=""
    DNS_ID=""

    index=1
    for dns in "${DNS_SERVERS[@]}"; do
        matrix_effect
        echo -e "${GREEN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
        echo -e "${GREEN}     üîç ESCANEANDO DNS JAKUDOSHY${NC}"
        echo -e "${GREEN}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
        echo ""
        echo -e "${CYAN}DNS #${index}: ${WHITE}$dns${NC}"
        echo -e "${CYAN}ID: ${WHITE}DNS-${index}${NC}"
        echo ""

        echo -e "${GREEN}üì° Comprobando DNS Jakudoshy ($dns)...${NC}"
        sleep 0.4

        if dig @"$dns" google.com +time=2 +tries=1 >/dev/null 2>&1; then
            DNS_OK="$dns"
            DNS_ID="DNS-${index}"
            break
        else
            echo -e "${RED}‚õî Sin respuesta.${NC}"
            sleep 0.7
        fi

        index=$((index+1))
    done

    if [[ -z "$DNS_OK" ]]; then
        menu_error_dns
    fi

    barra_hacker

    clear
    echo -e "${GREEN}‚úî DNS JAKUDOSHY OPERATIVO${NC}"
    echo -e "${GREEN}‚û§ DNS: ${WHITE}$DNS_OK${NC}"
    echo -e "${GREEN}‚û§ ID:  ${WHITE}${DNS_ID}${NC}"
    echo ""
    echo -e "${CYAN}‚è≥ Estableciendo t√∫nel Slipstream Jakudoshy...${NC}"
    echo ""
    mask_anon

    slipstream-client \
        --tcp-listen-port=5201 \
        --resolver="$DNS_OK:53" \
        --domain="$DOMINIO" \
        --keep-alive-interval=600 \
        --congestion-control=cubic &

    SLP_PID=$!
    sleep 1

    barra_hacker

    clear
    echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo -e "${GREEN}   üü¢ T√öNEL SLIPSTREAM JAKUDOSHY ACTIVO${NC}"
    echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
    echo ""
    echo -e "${CYAN}Conectado al DNS: ${WHITE}$DNS_OK${NC}"
    echo -e "${CYAN}ID asignado: ${WHITE}${DNS_ID}${NC}"
    echo ""
    mask_anon
    echo -e "${GREEN}Presiona Ctrl+C para cerrar el t√∫nel.${NC}"

    wait "$SLP_PID"
}

# ================================
# üü© MEN√ö PRINCIPAL
# ================================
clear
echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
echo -e "${GREEN}     üü© SISTEMA DE CONEXI√ìN JAKUDOSHY${NC}"
echo -e "${GREEN}‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà${NC}"
echo ""
echo -e "${CYAN}1) Conexi√≥n por Datos M√≥viles${NC}"
echo -e "${CYAN}2) Conexi√≥n por WiFi${NC}"
echo -e "${RED}3) Salir${NC}"
echo ""
mask_anon
read -p "üëâ Seleccione una opci√≥n: " opcion

case $opcion in
    1|2)
        barra_hacker
        conectar_dns
        ;;
    3)
        exit 0
        ;;
    *)
        echo -e "${RED}‚ö† Opci√≥n inv√°lida${NC}"
        ;;
esac